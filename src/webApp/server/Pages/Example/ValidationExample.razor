@page "/blazored"

<h1>Blazored</h1>

<hr class="mb-5" />

<EditForm Model="@person" OnSubmit="@SubmitFormAsync">
    <FluentValidationValidator @ref="fluentValidationValidator" />
    <ValidationSummary />

    <p>
        <label>First Name: </label>
        <MudTextField @bind-Value="@person.FirstName" />
        <ValidationMessage For="@(() => person.FirstName)" />
    </p>

    <p>
        <label>Last Name: </label>
        <MudTextField @bind-Value="@person.LastName" class="mud-input-control" />
        <ValidationMessage For="@(() => person.LastName)" />
    </p>

    <hr />

    <p>
        <label>Age: </label>
        <MudNumericField @bind-Value="@person.Age" class="mud-input-control" />
        <ValidationMessage For="@(() => person.Age)" />
    </p>

    <p>
        <label>Email Address: </label>
        <MudTextField @bind-Value="@person.EmailAddress" class="mud-input-control" />
        <ValidationMessage For="@(() => person.EmailAddress)" />
    </p>

    <p>
        <label>Address: Line 1: </label>
        <MudTextField @bind-Value="@person.Address.Line1" class="mud-input-control" />
        <ValidationMessage For="@(() => person.Address.Line1)" />
    </p>

    <p>
        <label>Address: Line 2: </label>
        <MudTextField @bind-Value="@person.Address.Line2" class="mud-input-control" />
    </p>

    <p>
        <label>Address: Town: </label>
        <MudTextField @bind-Value="@person.Address.Town" />
        <ValidationMessage For="@(() => person.Address.Town)" />
    </p>

    <p>
        <label>Address: County: </label>
        <MudTextField @bind-Value="@person.Address.County" class="mud-input-control" />
        <ValidationMessage For="@(() => person.Address.County)" />
    </p>

    <p>
        <label>Address: Postcode: </label>
        <MudTextField @bind-Value="@person.Address.Postcode" />
        <ValidationMessage For="@(() => person.Address.Postcode)" />
    </p>

    <button type="submit">Save</button>

</EditForm>

@code {
    private readonly Person person = new();
    private FluentValidationValidator? fluentValidationValidator;

    private async Task SubmitFormAsync()
    {
        if (await fluentValidationValidator!.ValidateAsync())
        {
            Console.WriteLine("Form Submitted Successfully!");
        }
    }
}